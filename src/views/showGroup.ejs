<%- include('util/header') %>
  <% if(typeof message.response !="undefined" && !message.response[0].success) { %>
    <div class="alert alert-danger" role="alert">
      <% if(typeof message.response[0].errorMessage[0].msg !="undefined" ){%>
        <%= message.response[0].errorMessage[0].msg %>
        <%}else{%>
          <%= message.response[0].errorMessage%>
          <%}%>
        </div>
        <% }else if(typeof message.response !="undefined" && message.response[0].success){ %>
          <div class="alert alert-primary" role="alert">
            <%= message.response[0].data%>
          </div>
          <%}%>
  <main class="main-site">
    <div class="container-xl">
      <div class="adduser">
        <a href="group/add">
          <span>New Group <i class="fas fa-user"></i></span>
        </a>
      </div>
      <form action="" class="frm">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Group Name</th>
              <th>Group Members</th>
              <th>Add Expense</th>
              <th>Delete Group</th>
            </tr>
          </thead>
          <tbody>
            <% data.forEach(element => { %>
              <tr>
                <td><%=element.dataValues.groupName%></td>
                <td>
                  <span>
                  <%element.dataValues.group.forEach(i => { %>
                    <%=i.dataValues.groupMember.dataValues.name%><br>
                 <% }); %>
                  </span>
                </td>
                <td>
                  <a href="/transaction/group/?id=<%=element.dataValues.id%>">
                    <span class="mx-auto me-4"
                      ><i class="fa fa-plus"></i
                    ></span>
                  </a>
                </td>
                <td>
                  <a href="/group/delete?id=<%=element.dataValues.id%>">
                    <span class="mx-auto me-4"
                      ><i class="fas fa-times"></i
                    ></span>
                  </a>
                </td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      </form>
    </div>
  </main>
</body>
</html>